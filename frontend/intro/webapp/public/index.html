<!doctype html>
<html lang="en">
   <head>
      <!-- Required meta tags -->
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
      <!-- font family using Lato"-->
    
      <!-- <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.10.2/dist/umd/popper.min.js"></script> -->
      <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"></script>
    
      <script>
        document.addEventListener('DOMContentLoaded', function () {
    const indicators = document.querySelectorAll('.custom-indicator');
    const carousel = document.getElementById('myCarousel');

    carousel.addEventListener('slide.bs.carousel', function () {
      const activeIndex = $('.carousel-item.active').index();
      document.querySelector('.custom-indicator.active').classList.remove('active');
      indicators[activeIndex].classList.add('active');
    });

    indicators.forEach((indicator, index) => {
      indicator.addEventListener('click', function () {
        document.querySelector('.custom-indicator.active').classList.remove('active');
        this.classList.add('active');
        $('#myCarousel').carousel(index);
      });
    });
  });
            function redirectToDashboard() {
                window.open("https://app.swaggerhub.com/apis/ulca/ULCA/0.7.0", "_blank");
            };

      </script>
      <link rel="shortcut icon" href="%PUBLIC_URL%/favicon.ico">
      <!-- Bootstrap CSS -->
      <link rel="stylesheet" href="%PUBLIC_URL%/css/bootstrap.min.css">
      <!--css -->
      <link rel="stylesheet" href="%PUBLIC_URL%/css/style.css">
      <title>ULCA</title>
   </head>
   <body>
      <!-- <header>
         <div class="container">
            <div class="row align-items-center">
               <div class="col-3 col-md-5">
                  <img src="%PUBLIC_URL%/img/gov-logo-1.png" alt="NLTM logo">
               </div>
               <div class="col-9 col-md-7" style="display: flex; justify-content: flex-end;">
                  <img src="%PUBLIC_URL%/img/Bhashini_en.svg" alt="bhashini logo">
               </div>
            </div>
         </div>
      </header> -->
      <!-- navigation menu  -->
      <!-- <nav class="navbar navbar-expand navbar-light bg-light">
         <div class="container">
            <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarsExample07" aria-controls="navbarsExample07" aria-expanded="false" aria-label="Toggle navigation">
            <span class="navbar-toggler-icon"></span>
            </button>
            <div class="collapse navbar-collapse" id="navbarsExample07">
               <ul class="navbar-nav mr-auto navbarScroll">
                  <li class="nav-item">
                     <a class="nav-link" href="https://bhashini.gov.in/">Home <span class="sr-only">(current)</span></a>
                  </li>
                  <li class="dropdown">
                     <a class="dropdown-toggle nav-link" href="#" id="dropdownMenuLink" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                     About Bhashini
                     </a>
                     <div class="dropdown-menu" data-bs-popper="static" aria-labelledby="dropdownMenuLink">
                        <a data-rr-ui-dropdown-item="" class="dropdown-item nav-item" href="https://bhashini.gov.in/about-bhashini" target="_self" rel="noopener noreferrer">About Bhashini</a>
                        <a data-rr-ui-dropdown-item="" class="dropdown-item nav-item" href="https://bhashini.gov.in/teams" target="_self" rel="noopener noreferrer">Team</a>
                     </div>
                  </li>
                  <li class="nav-item">
                     <a class="nav-link" href="https://bhashini.gov.in/ecosystem">Ecosystem</a>
                  </li>
                  <li class="nav-item">
                     <a class="nav-link" href="https://anuvaad.bhashini.gov.in/">Anuvaad</a>
                  </li>
                  <li class="dropdown">
                     <a class="dropdown-toggle nav-link" href="#" id="SahyogidropdownMenuLink" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                     Sahyogi
                     </a>
                     <div aria-labelledby="SahyogidropdownMenuLink" data-bs-popper="static" class="dropdown-menu">
                        <a data-rr-ui-dropdown-item="" class="dropdown-item nav-item" href="https://bhashini.gov.in/sahyogi" target="_self" rel="noopener noreferrer">Empanelled Agencies</a>
                        <a data-rr-ui-dropdown-item="" class="dropdown-item nav-item" href="https://bhashini.gov.in/career" target="_self" rel="noopener noreferrer">Career</a>
                     </div>
                  </li>
                  <li class="nav-item active">
                     <a class="nav-link" href="#">ULCA</a>
                  </li>
               </ul>
            </div>
            <div class="join">
               <a class="bh-btn-primary" href="https://bhashini.gov.in/bhashadaan" target="_blank" rel="noopener noreferrer"> Join Bhasha<span class="yellowColor">&nbsp;Daan</span> </a>
            </div>
         </div>
      </nav> -->
      <!-- end here -->
      <section class="section about">
         <!-- <div id="carouselExampleSlidesOnly" class="carousel slide" data-bs-ride="carousel">
            <div class="carousel-inner">
               <div class="carousel-item active">
                  <img src="%PUBLIC_URL%/img/slide1.jpg" class="d-block w-100" alt="...">
               </div>
               <div class="carousel-item">
                  <img src="%PUBLIC_URL%/img/slide2.jpg" class="d-block w-100" alt="...">
               </div>
            </div>
         </div> -->
   
    
      
         <!-- <div class="why-ulca">
            <p class="h3 text-center">Why ULCA</p>
            <p class="display-6 text-center">Your premier hub for Indian language resources, providing curated datasets and enhanced language-specific tasks for
                cutting-edge linguistic innovation and research.</p>
            </div> -->
      </section>
      <section className="section dashboard">
         <!-- <div class="container">
            <div class="row">-->
         <div class="dashboard-map">
            <div id="root"></div>
         </div>
         </div>
         </div>
         </div>
      </section>
      <script>

         // select box

         let selectedValue = 'parallel-corpus';
         var criterions = [{"field": "sourceLanguage","value": "en"}]
     async    function logInitialValue() {
    let initialValue = document.querySelector('.default_option li p').id;
    console.log('Initial value:', initialValue);
    try {
    // Call the API with the first value on page load
   

    const response1 = await fetchChartData(initialValue, "", criterions);
    document.getElementById('totalValue').innerText = response1?.count;

    const response2 = await fetchChartData("model", "", "");
    document.getElementById('totalValue2').innerText = response2?.count;

    const response3 = await fetchChartData("benchmark", "", "");
    document.getElementById('totalValue3').innerText = response3?.count;
  } catch (error) {
    console.error("Error handling API response:", error);
  }
  }

  // Call the function to log the initial value
  logInitialValue();

         document.querySelectorAll('.default_option').forEach(function (defaultOption) {
  defaultOption.addEventListener('click', function () {
    this.parentElement.classList.toggle('active');
  });
});

document.querySelectorAll('.select_ul li').forEach(function (selectLi) {
  selectLi.addEventListener('click', async function () {
    var currentElement = this.innerHTML;
    var CurrentValue = this.querySelector('.option p').id;
     // Update the selectedValue variable
     selectedValue = CurrentValue;
    document.querySelectorAll('.default_option li').forEach(function (defaultLi) {
      defaultLi.innerHTML = currentElement;
    });

    this.closest('.select_wrap').classList.remove('active');
    console.log('Selected value:', selectedValue);
    if (selectedValue) {
                 try {
                   const responseJson = await fetchChartData(selectedValue,"",criterions);
              document.getElementById('totalValue').innerText = responseJson.count;
                   // Handle the response or update the UI based on the API call result
                   console.log("API Response:", response);
                 } catch (error) {
                   console.error("Error calling API:", error);
                 }
               }
  });

});

// Close the dropdown when clicking outside of it
window.onclick = function(event) {
      if (!event.target.matches('.select_wrap')) {
         this.closest('.select_wrap').classList.remove('active');
          
        
      }
    }

        
               async function fetchChartData(dataType, value, criterions) {
            window.REACT_APP_APIGW_BASE_URL = '<%= process.env.REACT_APP_APIGW_BASE_URL ||  "https://dev-auth.ulcacontrib.org" %>';

            const endpoint = `${window.REACT_APP_APIGW_BASE_URL}/ulca/data-metric/v0/store/search`;
         
           const request = {
             type: dataType,
             criterions: criterions ? criterions : null,
             groupby: value ? [{ field: value, value: null }] : null,
           };
         
           const headers = {
             headers: {
               "Content-Type": "application/json",
             },
           };
         
           const resp = await fetch(endpoint, {
             method: "post",
             body: JSON.stringify(request),
             headers: headers.headers,
           });
           const resp_data = await resp.json();
           if(resp.ok){
            return resp_data;
           }
         }
         
         
         
             
      </script>
      <!-- Optional JavaScript -->
      <!-- jQuery first, then Popper.js, then Bootstrap JS -->
      <script src="https://code.jquery.com/jquery-3.2.1.slim.min.js" integrity="sha384-KJ3o2DKtIkvYIK3UENzmM7KCkRr/rE9/Qpg6aAZGJwFDMVNA/GpGFF93hXpG5KkN" crossorigin="anonymous"></script>
      <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.12.9/umd/popper.min.js" integrity="sha384-ApNbgh9B+Y1QKtv3Rn7W3mgPxhU9K/ScQsAP7hUibX39j7fakFPskvXusvfa0b4Q" crossorigin="anonymous"></script>
      <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/js/bootstrap.min.js" integrity="sha384-JZR6Spejh4U02d8jOt6vLEHfe/JQGiRRSQQxSfFWpi1MquVdAyjUar5+76PVCmYl" crossorigin="anonymous"></script>
   </body>
</html>